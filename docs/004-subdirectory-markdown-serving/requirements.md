# Issue #004: Subdirectory Markdown Serving

## Problem Statement

現在のmd-serverは、publicディレクトリ直下のMarkdownファイルのみをHTMLとして配信しています。サブディレクトリ内のMarkdownファイルにはアクセスできず、ファイル一覧にも表示されません。

ユーザーがドキュメントをサブディレクトリで整理している場合（例: `docs/guide/setup.md`）、これらのファイルにアクセスする手段がありません。

## Requirements

### Functional Requirements

1. **サブディレクトリ内のMarkdownファイル配信**
   - `public/subdir/file.md` へのアクセス時、HTMLに変換して配信する
   - ネストされたディレクトリも対応する（例: `public/a/b/c/file.md`）

2. **ファイル一覧の再帰的表示**
   - トップページ (`/`) でサブディレクトリ内のファイルも一覧表示する
   - ディレクトリ構造がわかる形式で表示する

3. **Watch モードの対応**
   - サブディレクトリ内のファイル変更も検知してリロードする

### Non-Functional Requirements

1. **セキュリティ**
   - パストラバーサル攻撃を防ぐ（`../` を使った攻撃対策）
   - publicディレクトリ外のファイルにアクセスできないようにする

2. **後方互換性**
   - 既存のルート直下のMarkdownファイルへのアクセスは変更なし

## Constraints

- 既存のAPIエンドポイント形式を維持する
- Express.jsのルーティング機能を使用する
- Node.js標準ライブラリを優先的に使用する

## Acceptance Criteria

1. [ ] `/subdir/file.md` 形式のURLでサブディレクトリ内のMarkdownファイルにアクセスできる
2. [ ] ネストされたパス（例: `/a/b/c/file.md`）でもアクセスできる
3. [ ] トップページにサブディレクトリ内のファイルも表示される
4. [ ] `../` を含むパスでpublicディレクトリ外にアクセスできない
5. [ ] Watchモードでサブディレクトリ内のファイル変更も検知される
6. [ ] 既存のテストがすべてパスする
7. [ ] 新機能のテストが追加されている

## User Stories

### US-1: サブディレクトリのMarkdownファイルを閲覧する
**As a** ユーザー
**I want to** サブディレクトリ内のMarkdownファイルをブラウザで閲覧したい
**So that** ディレクトリで整理されたドキュメントにアクセスできる

### US-2: すべてのMarkdownファイルを一覧で確認する
**As a** ユーザー
**I want to** サブディレクトリ内のファイルも含めた一覧を見たい
**So that** どのドキュメントが存在するか把握できる

### US-3: サブディレクトリのファイルを編集中に自動リロードする
**As a** ユーザー
**I want to** サブディレクトリ内のファイルを編集したときも自動でリロードしてほしい
**So that** 編集結果をすぐに確認できる
